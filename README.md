# آزمایش دوم - سیستم پرداخت

## مرحله 1:

### گزارش Code Smells

#### Code Smells شناسایی‌شده

#### 1. **کلاس بزرگ (Big Class, God Class)**
- **توضیح:** کلاس `PaymentProcessor` دارای وظایف متعددی است، از جمله اعتبارسنجی، پردازش پرداخت و ثبت تراکنش، که باعث افزایش پیچیدگی و کاهش خوانایی کد می‌شود.

#### 2. **متد طولانی (Long Method)**
- **توضیح:** متد `processPayment` شامل چندین وظیفه مختلف است که باعث دشوار شدن نگهداری و درک آن می‌شود.

#### 3. **استفاده بیش از حد از Switch (Excessive Switch Statement)**
- **توضیح:** متد `processPayment` از یک `switch-case` برای مدیریت انواع مختلف پرداخت استفاده می‌کند که گسترش کد را سخت می‌کند.

#### 4. **کد تکراری (Duplicated Code)**
- **توضیح:** منطق پردازش پرداخت برای روش‌های مختلف مانند کارت اعتباری، کیف پول دیجیتال و انتقال بانکی مشابه است و باعث تکرار غیرضروری کد شده است.

#### 5. **Primitive Obsession (وابستگی بیش از حد به انواع اولیه)**
- **توضیح:** اطلاعات مشتری و پرداخت به‌صورت `Map<String, String>` ذخیره شده‌اند که باعث کاهش خوانایی و ایمنی نوع داده‌ها می‌شود.

#### 6. **Hardcoded Configuration (پیکربندی هاردکد شده)**
- **توضیح:** مقادیر مربوط به APIهای پرداخت مستقیماً در کلاس `PaymentProcessor` قرار داده شده‌اند که باعث وابستگی بالا و کاهش انعطاف‌پذیری کد می‌شود.

#### 7. **Magic Strings (رشته‌های جادویی)**
- **توضیح:** مقادیر ثابت مانند `"USD"`, `"EUR"`, `"GBP"` در کد به‌صورت رشته‌های جادویی استفاده شده‌اند. این نوع داده‌ها در صورت اشتباه تایپ، ممکن است به‌طور خاموشی منجر به خطا شوند. استفاده از **ثابت‌ها** یا **enum** برای این مقادیر، ایمنی کد را افزایش می‌دهد.

#### 8. **Lack of Unit Tests (عدم وجود تست‌های واحد)**
- **توضیح:** طراحی فعلی، وابستگی شدید به پیاده‌سازی دارد که باعث دشوار شدن تست‌نویسی می‌شود.
